@using LetsRaid.Enums
@model LetsRaid.Models.GuildModels.Guild

@{
    ViewBag.Title = "Guild Members";
}

<h2>Guild Members</h2>

@*<div class="form-group">
        <div class="input-group">
            <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
            <input type="text" id="Search" placeholder="Search by name or role or level" class="form-control" />
        </div>
    </div>*@
<div class="form-group row">
    <div class="col-md-2">
        <div class="input-group">

            @*<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>*@
            <input type="text" id="SearchByName" placeholder="Search by Name" class="form-control" />
        </div>
    </div>
    <div class="col-md-2">
        <div class="input-group">
            @*<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>*@
            <input type="text" id="SearchByClass" placeholder="Search by Class" class="form-control" />

        </div>
    </div>
    <div class="col-md-2">
        <div class="input-group">
            @*<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>*@
            <input type="text" id="SearchByLevel" placeholder="Search by Level" class="form-control" />

        </div>
    </div>
    <div class="col-md-2">
        <div class="input-group">
           @* <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>*@
            <input type="text" id="SearchByRole" placeholder="Search by Role" class="form-control" />

        </div>
    </div>
</div>

@{string groupListPath = String.Format("Details/{0}", Request.QueryString["raidId"]); }
<a href="@Url.Action(groupListPath, "Raids")">Group List</a>
<table class="table table-striped table-hover" id="NamesFromTable">
    <thead>
        <tr>
            <th>
                Name
            </th>
            <th>
                Class
            </th>
            <th>
                Level
            </th>
            <th>
                Role
            </th>
            <th>
                Add to list
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody id="DataSearching">

        @for (int i = 0; i <= 100; i++)
        {
            <tr class="Search">
                <td id="byName">

                    @Html.ActionLink(Model.Members[i].Character.Name, "Details", "Character", new { serverName = Model.ServerName, characterName = Model.Members[i].Character.Name }, null)
                </td>
                <td>
                    @Model.GetCharacterClass(Model.Members[i].Character.Class)
                </td>
                <td>
                    @Html.DisplayFor(model => Model.Members[i].Character.Level)
                </td>
                <td>
                    @Html.DisplayFor(model => Model.Members[i].Character.Spec.role)
                </td>
                <td>
                    <img src="@ViewBag.Thumbnail@Model.Members[i].Character.Thumbnail" alt="Thumbnail" />
                </td>
                <td class="btn btn-default btn-md">
                    @Html.ActionLink("Add Character", "AddCharacterToDB", "Guilds",
                   new LetsRaid.ViewModels.AddRaidCharacterViewModel()
                   {
                       CharacterName = Model.Members[i].Character.Name,
                       ServerName = Model.ServerName,
                       ServerId = int.Parse(Request.QueryString["serverId"]),
                       GuildId = Convert.ToInt32(Request.QueryString["guildId"]),
                       RaidId = int.Parse(Request.QueryString["raidId"]),
                       PlayerClass = Model.Members[i].Character.Class,
                       Level = int.Parse(Model.Members[i].Character.Level),
                       Spec = Model.Members[i].Character.Spec?.role,
                       Thumbnail = Model.Members[i].Character.Thumbnail,

                   },
                   null)
                </td>
                @*<td>
                    @Html.ActionLink("AddToList", "", new { id = Model.Members[i].GuildMemberId })*@
            </tr>
        }
    </tbody>
</table>
<span id="errmsg" style="display:none;" class="text-danger"></span>

<script src="~/Scripts/jquery-3.3.1.min.js"></script>
@*<script src="~/Scripts/Custom.js"></script>*@
<script src="~/Scripts/search-by-name-level.js"></script>